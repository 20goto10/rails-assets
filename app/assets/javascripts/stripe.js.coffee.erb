DEFAUT_AMOUNT = 5

DonationController = ($scope, $window) ->
  handler = StripeCheckout.configure
    key: '<%= Rails.configuration.stripe[:publishable_key] %>'
    locale: 'auto'
    token: (token) ->
      debugger

  $scope.amount = DEFAUT_AMOUNT

  $scope.invoke = ->
    handler.open
      name: 'Rails Assets'
      description: 'Donation'
      amount: $scope.amount * 100

angular.module('rails-assets').controller 'DonationCtrl', [
  '$scope',
  '$window',
  DonationController
]
